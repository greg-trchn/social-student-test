!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3im5":function(t,n,r){"use strict";r.r(n),r.d(n,"AuthorizationsModule",(function(){return ie}));var o,a,s,b,c,u,l=r("ofXK"),f=r("tyNb"),g=r("fXoL"),p=r("TEn/"),m=((a=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=g.Bb({type:a,selectors:[["app-authorizations"]],decls:10,vars:0,consts:[["slot","bottom"],["tab","login"],["name","home"],["tab","register"],["name","calendar"]],template:function(e,t){1&e&&(g.Mb(0,"ion-tabs"),g.Mb(1,"ion-tab-bar",0),g.Mb(2,"ion-tab-button",1),g.Mb(3,"ion-label"),g.gc(4,"Login"),g.Lb(),g.Ib(5,"ion-icon",2),g.Lb(),g.Mb(6,"ion-tab-button",3),g.Mb(7,"ion-label"),g.gc(8,"Register"),g.Lb(),g.Ib(9,"ion-icon",4),g.Lb(),g.Lb(),g.Lb())},directives:[p.q,p.o,p.p,p.l,p.i],styles:[""]}),a),d=((o=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=g.Bb({type:o,selectors:[["app-entry"]],decls:7,vars:0,consts:[["routerLink","/auth/login","size","large","fill","outline"],["routerLink","/auth/register","size","large","fill","outline"]],template:function(e,t){1&e&&(g.Mb(0,"ion-card"),g.Mb(1,"ion-item"),g.Mb(2,"ion-button",0),g.gc(3,"Login"),g.Lb(),g.Lb(),g.Mb(4,"ion-item"),g.Mb(5,"ion-button",1),g.gc(6,"Register"),g.Lb(),g.Lb(),g.Lb())},directives:[p.c,p.k,p.b,p.y,f.h],styles:[""]}),o),v=r("3Pt+"),h=((s=function(){function t(i){e(this,t),this.formBuilder=i}return i(t,[{key:"create",value:function(){return this.loginForm=this.formBuilder.group({email:["",[v.k.required,v.k.email]],password:["",v.k.required]})}}]),t}()).\u0275fac=function(e){return new(e||s)(g.Qb(v.a))},s.\u0275prov=g.Db({token:s,factory:s.\u0275fac,providedIn:"root"}),s),y=r("AytR"),L=r("vkgz"),w=r("tk/3"),M=r("f4AX"),I=((u=function t(){e(this,t)}).\u0275fac=function(e){return new(e||u)},u.\u0275prov=g.Db({token:u,factory:u.\u0275fac,providedIn:"root"}),u),k=((c=function(){function t(i,n,r){e(this,t),this.http=i,this.UserService=n,this.loadingService=r}return i(t,[{key:"register",value:function(e){return this.http.post(y.a.api.register,{username:e.get("username").value,email:e.get("email").value,password:e.get("password").value})}},{key:"login",value:function(e){var t=this;return this.http.post(y.a.api.login,{email:e.get("email").value,password:e.get("password").value}).pipe(Object(L.a)((function(e){t.UserService.set(e),console.log("je suis dans tap")})))}}]),t}()).\u0275fac=function(e){return new(e||c)(g.Qb(w.b),g.Qb(M.a),g.Qb(I))},c.\u0275prov=g.Db({token:c,factory:c.\u0275fac,providedIn:"any"}),c),x=((b=function t(){e(this,t)}).\u0275fac=function(e){return new(e||b)},b.\u0275cmp=g.Bb({type:b,selectors:[["app-toolbar"]],inputs:{title:"title"},decls:4,vars:1,template:function(e,t){1&e&&(g.Mb(0,"ion-header"),g.Mb(1,"ion-toolbar"),g.Mb(2,"ion-title"),g.gc(3),g.Lb(),g.Lb(),g.Lb()),2&e&&(g.xb(3),g.hc(t.title))},directives:[p.h,p.t,p.s],styles:[""]}),b);function F(e,t){if(1&e&&(g.Mb(0,"ion-item"),g.Mb(1,"ion-text",8),g.gc(2),g.Lb(),g.Lb()),2&e){var i=g.Wb();g.xb(2),g.ic(" ",i.error," ")}}function S(e,t){1&e&&(g.Mb(0,"span"),g.gc(1,"Please enter a valid email"),g.Lb())}function Z(e,t){1&e&&(g.Mb(0,"span"),g.gc(1,"Email is required"),g.Lb())}function P(e,t){if(1&e&&(g.Mb(0,"ion-text",8),g.fc(1,S,2,0,"span",3),g.fc(2,Z,2,0,"span",3),g.Lb()),2&e){var i=g.Wb();g.xb(1),g.Zb("ngIf",i.loginForm.get("email").hasError("email")),g.xb(1),g.Zb("ngIf",i.loginForm.get("email").hasError("required"))}}function E(e,t){1&e&&(g.Mb(0,"ion-text",8),g.gc(1," Password is required "),g.Lb())}function q(e,t){if(1&e&&(g.Mb(0,"div"),g.Mb(1,"ion-button",9),g.gc(2,"Submit"),g.Lb(),g.Lb()),2&e){var i=g.Wb();g.xb(1),g.Zb("disabled",!i.loginForm.valid)}}function C(e,t){1&e&&(g.Mb(0,"div"),g.Ib(1,"ion-spinner",10),g.Lb())}var H,z,j,B=((j=function(){function t(i,n,r,o,a){e(this,t),this.loginFormService=i,this.authorizationsHttpService=n,this.routerService=r,this.UserService=o,this.loadingService=a,this.titre="Login"}return i(t,[{key:"ngOnInit",value:function(){this.loginForm=this.loginFormService.create()}},{key:"login",value:function(){var e=this;this.authorizationsHttpService.login(this.loginForm).subscribe((function(e){console.log("Je suis dans subscribe")}),(function(t){e.error=t}))}}]),t}()).\u0275fac=function(e){return new(e||j)(g.Hb(h),g.Hb(k),g.Hb(f.g),g.Hb(M.a),g.Hb(I))},j.\u0275cmp=g.Bb({type:j,selectors:[["app-login"]],decls:19,vars:7,consts:[[3,"title"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],[4,"ngIf"],["position","floating"],["type","email","formControlName","email"],["color","danger",4,"ngIf"],["type","password","formControlName","password"],["color","danger"],["type","submit",3,"disabled"],["name","bubbles"]],template:function(e,t){1&e&&(g.Ib(0,"app-toolbar",0),g.Mb(1,"ion-content",1),g.Mb(2,"h1"),g.gc(3,"Login"),g.Lb(),g.Mb(4,"form",2),g.Ub("ngSubmit",(function(){return t.login()})),g.fc(5,F,3,1,"ion-item",3),g.Mb(6,"ion-item"),g.Mb(7,"ion-label",4),g.gc(8,"Email"),g.Lb(),g.Ib(9,"ion-input",5),g.fc(10,P,3,2,"ion-text",6),g.Lb(),g.Mb(11,"ion-item"),g.Mb(12,"ion-label",4),g.gc(13,"Password"),g.Lb(),g.Ib(14,"ion-input",7),g.fc(15,E,2,0,"ion-text",6),g.Lb(),g.Ib(16,"br"),g.fc(17,q,3,1,"div",3),g.fc(18,C,2,0,"div",3),g.Lb(),g.Lb()),2&e&&(g.Zb("title",t.titre),g.xb(4),g.Zb("formGroup",t.loginForm),g.xb(1),g.Zb("ngIf",t.error),g.xb(5),g.Zb("ngIf",!t.loginForm.get("email").valid&&t.loginForm.get("email").dirty),g.xb(5),g.Zb("ngIf",t.loginForm.get("password").dirty&&!t.loginForm.get("password").valid),g.xb(2),g.Zb("ngIf",!t.loadingService.login),g.xb(1),g.Zb("ngIf",t.loadingService.login))},directives:[x,p.g,v.l,v.i,v.c,l.i,p.k,p.l,p.j,p.z,v.h,v.b,p.r,p.b,p.n],styles:[""]}),j),N=((z=function(){function t(){e(this,t)}return i(t,[{key:"validate",value:function(e){return e.dirty?(this.listener||(this.listener=e.root.get("password").valueChanges.subscribe((function(){return e.updateValueAndValidity()}))),e.root.get("password").value!==e.value?{confirm:!0}:null):(this.listener&&(this.listener.unsubscribe(),this.listener=null),null)}}]),t}()).\u0275fac=function(e){return new(e||z)},z.\u0275dir=g.Cb({type:z,selectors:[["","appRepeatedPassword",""]],features:[g.wb([{provide:v.e,useExisting:z,multi:!0}])]}),z.\u0275prov=g.Db({token:z,factory:z.\u0275fac,providedIn:"root"}),z),D=((H=function(){function t(i,n){e(this,t),this.formBuilder=i,this.repeatedPasswordDirective=n}return i(t,[{key:"create",value:function(){return this.registerForm=this.formBuilder.group({username:["",v.k.required],email:["",[v.k.required,v.k.email]],password:["",v.k.required],confirm:["",[this.repeatedPasswordDirective]]})}}]),t}()).\u0275fac=function(e){return new(e||H)(g.Qb(v.a),g.Qb(N))},H.\u0275prov=g.Db({token:H,factory:H.\u0275fac,providedIn:"root"}),H);function O(e,t){1&e&&(g.Mb(0,"span"),g.gc(1,"Please enter a valid username."),g.Lb())}function Q(e,t){if(1&e&&(g.Mb(0,"ion-text",10),g.fc(1,O,2,0,"span",11),g.Lb()),2&e){var i=g.Wb();g.xb(1),g.Zb("ngIf",i.registerForm.get("username").hasError("required"))}}function R(e,t){1&e&&(g.Mb(0,"span"),g.gc(1,"Please enter a valid email"),g.Lb())}function U(e,t){1&e&&(g.Mb(0,"span"),g.gc(1,"Email is required"),g.Lb())}function A(e,t){if(1&e&&(g.Mb(0,"ion-text",10),g.fc(1,R,2,0,"span",11),g.fc(2,U,2,0,"span",11),g.Lb()),2&e){var i=g.Wb();g.xb(1),g.Zb("ngIf",i.registerForm.get("email").hasError("email")),g.xb(1),g.Zb("ngIf",i.registerForm.get("email").hasError("required"))}}function W(e,t){1&e&&(g.Mb(0,"ion-text",10),g.gc(1," Password is required "),g.Lb())}function G(e,t){1&e&&(g.Mb(0,"ion-text",10),g.gc(1," Please confirm your password "),g.Lb())}var J,T,X,V,K=[{path:"",component:m,children:[{path:"entry",component:d},{path:"login",component:B},{path:"register",component:(J=function(){function t(i,n,r){e(this,t),this.authorizationsHttpService=i,this.registerFormService=n,this.routerService=r}return i(t,[{key:"ngOnInit",value:function(){this.registerForm=this.registerFormService.create()}},{key:"register",value:function(){var e=this;this.authorizationsHttpService.register(this.registerForm).subscribe((function(){e.routerService.navigate(["/auth","login"])}),(function(t){e.error=t}))}}]),t}(),J.\u0275fac=function(e){return new(e||J)(g.Hb(k),g.Hb(D),g.Hb(f.g))},J.\u0275cmp=g.Bb({type:J,selectors:[["app-register"]],decls:28,vars:7,consts:[[3,"title"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],["position","floating"],["type","text","formControlName","username"],["color","danger",4,"ngIf"],["type","email","formControlName","email"],["type","password","formControlName","password"],["type","password","formControlName","confirm"],["type","submit",3,"disabled"],["color","danger"],[4,"ngIf"]],template:function(e,t){1&e&&(g.Ib(0,"app-toolbar",0),g.Mb(1,"ion-content",1),g.Mb(2,"h1"),g.gc(3,"Register"),g.Lb(),g.Mb(4,"form",2),g.Ub("ngSubmit",(function(){return t.register()})),g.Mb(5,"ion-item"),g.Mb(6,"ion-label",3),g.gc(7,"Username"),g.Lb(),g.Ib(8,"ion-input",4),g.fc(9,Q,2,1,"ion-text",5),g.Lb(),g.Mb(10,"ion-item"),g.Mb(11,"ion-label",3),g.gc(12,"Email"),g.Lb(),g.Ib(13,"ion-input",6),g.fc(14,A,3,2,"ion-text",5),g.Lb(),g.Mb(15,"ion-item"),g.Mb(16,"ion-label",3),g.gc(17,"Password"),g.Lb(),g.Ib(18,"ion-input",7),g.fc(19,W,2,0,"ion-text",5),g.Lb(),g.Mb(20,"ion-item"),g.Mb(21,"ion-label",3),g.gc(22,"Confirm Password"),g.Lb(),g.Ib(23,"ion-input",8),g.fc(24,G,2,0,"ion-text",5),g.Lb(),g.Ib(25,"br"),g.Mb(26,"ion-button",9),g.gc(27,"Submit"),g.Lb(),g.Lb(),g.Lb()),2&e&&(g.Zb("title","Register"),g.xb(4),g.Zb("formGroup",t.registerForm),g.xb(5),g.Zb("ngIf",!t.registerForm.get("username").valid&&t.registerForm.get("username").dirty),g.xb(5),g.Zb("ngIf",!t.registerForm.get("email").valid&&t.registerForm.get("email").dirty),g.xb(5),g.Zb("ngIf",t.registerForm.get("password").dirty&&!t.registerForm.get("password").valid),g.xb(5),g.Zb("ngIf",t.registerForm.get("confirm").dirty&&!t.registerForm.get("confirm").valid),g.xb(2),g.Zb("disabled",!t.registerForm.valid))},directives:[x,p.g,v.l,v.i,v.c,p.k,p.l,p.j,p.z,v.h,v.b,l.i,p.b,p.r],styles:[""]}),J)},{path:"**",redirectTo:"entry"}]}],Y=((T=function t(){e(this,t)}).\u0275mod=g.Fb({type:T}),T.\u0275inj=g.Eb({factory:function(e){return new(e||T)},imports:[[f.i.forChild(K)],f.i]}),T),$=r("PCNd"),_=r("JIr8"),ee=r("nYR2"),te=((V=function(){function t(i){e(this,t),this.loadingService=i}return i(t,[{key:"intercept",value:function(e,t){var i=this,n=null;if(y.a.api.login===e.url)n="login";else{if(y.a.api.register!==e.url)return t.handle(e);n="register"}return this.loadingService[n]=!0,t.handle(e).pipe(Object(_.a)((function(e){var t="Network problem";throw 404===e.status?t="Incorrect email or password":400===e.status?t="An error has occurred, please try again":409===e.status?t=e.error.error:500===e.status&&(t="Unavailable Service"),t})),Object(ee.a)((function(){i.loadingService.login=!1})))}}]),t}()).\u0275fac=function(e){return new(e||V)(g.Qb(I))},V.\u0275prov=g.Db({token:V,factory:V.\u0275fac,providedIn:"root"}),V),ie=((X=function t(){e(this,t)}).\u0275mod=g.Fb({type:X}),X.\u0275inj=g.Eb({factory:function(e){return new(e||X)},providers:[{provide:w.a,useClass:te,multi:!0}],imports:[[l.b,$.a,Y]]}),X)}}])}();