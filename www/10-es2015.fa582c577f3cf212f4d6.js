(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3im5":function(e,t,r){"use strict";r.r(t),r.d(t,"AuthorizationsModule",(function(){return R}));var i=r("ofXK"),o=r("tyNb"),n=r("fXoL"),s=r("TEn/");let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Bb({type:e,selectors:[["app-authorizations"]],decls:10,vars:0,consts:[["slot","bottom"],["tab","login"],["name","home"],["tab","register"],["name","calendar"]],template:function(e,t){1&e&&(n.Mb(0,"ion-tabs"),n.Mb(1,"ion-tab-bar",0),n.Mb(2,"ion-tab-button",1),n.Mb(3,"ion-label"),n.gc(4,"Login"),n.Lb(),n.Ib(5,"ion-icon",2),n.Lb(),n.Mb(6,"ion-tab-button",3),n.Mb(7,"ion-label"),n.gc(8,"Register"),n.Lb(),n.Ib(9,"ion-icon",4),n.Lb(),n.Lb(),n.Lb())},directives:[s.q,s.o,s.p,s.l,s.i],styles:[""]}),e})(),b=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Bb({type:e,selectors:[["app-entry"]],decls:7,vars:0,consts:[["routerLink","/auth/login","size","large","fill","outline"],["routerLink","/auth/register","size","large","fill","outline"]],template:function(e,t){1&e&&(n.Mb(0,"ion-card"),n.Mb(1,"ion-item"),n.Mb(2,"ion-button",0),n.gc(3,"Login"),n.Lb(),n.Lb(),n.Mb(4,"ion-item"),n.Mb(5,"ion-button",1),n.gc(6,"Register"),n.Lb(),n.Lb(),n.Lb())},directives:[s.c,s.k,s.b,s.y,o.h],styles:[""]}),e})();var c=r("3Pt+");let l=(()=>{class e{constructor(e){this.formBuilder=e}create(){return this.loginForm=this.formBuilder.group({email:["",[c.k.required,c.k.email]],password:["",c.k.required]})}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(c.a))},e.\u0275prov=n.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=r("AytR"),g=r("vkgz"),p=r("tk/3"),m=r("f4AX");let d=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),f=(()=>{class e{constructor(e,t,r){this.http=e,this.UserService=t,this.loadingService=r}register(e){return this.http.post(u.a.api.register,{username:e.get("username").value,email:e.get("email").value,password:e.get("password").value})}login(e){return this.http.post(u.a.api.login,{email:e.get("email").value,password:e.get("password").value}).pipe(Object(g.a)(e=>{this.UserService.set(e),console.log("je suis dans tap")}))}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(p.b),n.Qb(m.a),n.Qb(d))},e.\u0275prov=n.Db({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Bb({type:e,selectors:[["app-toolbar"]],inputs:{title:"title"},decls:4,vars:1,template:function(e,t){1&e&&(n.Mb(0,"ion-header"),n.Mb(1,"ion-toolbar"),n.Mb(2,"ion-title"),n.gc(3),n.Lb(),n.Lb(),n.Lb()),2&e&&(n.xb(3),n.hc(t.title))},directives:[s.h,s.t,s.s],styles:[""]}),e})();function v(e,t){if(1&e&&(n.Mb(0,"ion-item"),n.Mb(1,"ion-text",8),n.gc(2),n.Lb(),n.Lb()),2&e){const e=n.Wb();n.xb(2),n.ic(" ",e.error," ")}}function L(e,t){1&e&&(n.Mb(0,"span"),n.gc(1,"Please enter a valid email"),n.Lb())}function M(e,t){1&e&&(n.Mb(0,"span"),n.gc(1,"Email is required"),n.Lb())}function w(e,t){if(1&e&&(n.Mb(0,"ion-text",8),n.fc(1,L,2,0,"span",3),n.fc(2,M,2,0,"span",3),n.Lb()),2&e){const e=n.Wb();n.xb(1),n.Zb("ngIf",e.loginForm.get("email").hasError("email")),n.xb(1),n.Zb("ngIf",e.loginForm.get("email").hasError("required"))}}function y(e,t){1&e&&(n.Mb(0,"ion-text",8),n.gc(1," Password is required "),n.Lb())}function I(e,t){if(1&e&&(n.Mb(0,"div"),n.Mb(1,"ion-button",9),n.gc(2,"Submit"),n.Lb(),n.Lb()),2&e){const e=n.Wb();n.xb(1),n.Zb("disabled",!e.loginForm.valid)}}function x(e,t){1&e&&(n.Mb(0,"div"),n.Ib(1,"ion-spinner",10),n.Lb())}let F=(()=>{class e{constructor(e,t,r,i,o){this.loginFormService=e,this.authorizationsHttpService=t,this.routerService=r,this.UserService=i,this.loadingService=o,this.titre="Login"}ngOnInit(){this.loginForm=this.loginFormService.create()}login(){this.authorizationsHttpService.login(this.loginForm).subscribe(e=>{console.log("Je suis dans subscribe")},e=>{this.error=e})}}return e.\u0275fac=function(t){return new(t||e)(n.Hb(l),n.Hb(f),n.Hb(o.g),n.Hb(m.a),n.Hb(d))},e.\u0275cmp=n.Bb({type:e,selectors:[["app-login"]],decls:19,vars:7,consts:[[3,"title"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],[4,"ngIf"],["position","floating"],["type","email","formControlName","email"],["color","danger",4,"ngIf"],["type","password","formControlName","password"],["color","danger"],["type","submit",3,"disabled"],["name","bubbles"]],template:function(e,t){1&e&&(n.Ib(0,"app-toolbar",0),n.Mb(1,"ion-content",1),n.Mb(2,"h1"),n.gc(3,"Login"),n.Lb(),n.Mb(4,"form",2),n.Ub("ngSubmit",(function(){return t.login()})),n.fc(5,v,3,1,"ion-item",3),n.Mb(6,"ion-item"),n.Mb(7,"ion-label",4),n.gc(8,"Email"),n.Lb(),n.Ib(9,"ion-input",5),n.fc(10,w,3,2,"ion-text",6),n.Lb(),n.Mb(11,"ion-item"),n.Mb(12,"ion-label",4),n.gc(13,"Password"),n.Lb(),n.Ib(14,"ion-input",7),n.fc(15,y,2,0,"ion-text",6),n.Lb(),n.Ib(16,"br"),n.fc(17,I,3,1,"div",3),n.fc(18,x,2,0,"div",3),n.Lb(),n.Lb()),2&e&&(n.Zb("title",t.titre),n.xb(4),n.Zb("formGroup",t.loginForm),n.xb(1),n.Zb("ngIf",t.error),n.xb(5),n.Zb("ngIf",!t.loginForm.get("email").valid&&t.loginForm.get("email").dirty),n.xb(5),n.Zb("ngIf",t.loginForm.get("password").dirty&&!t.loginForm.get("password").valid),n.xb(2),n.Zb("ngIf",!t.loadingService.login),n.xb(1),n.Zb("ngIf",t.loadingService.login))},directives:[h,s.g,c.l,c.i,c.c,i.i,s.k,s.l,s.j,s.z,c.h,c.b,s.r,s.b,s.n],styles:[""]}),e})(),S=(()=>{class e{constructor(){}validate(e){return e.dirty?(this.listener||(this.listener=e.root.get("password").valueChanges.subscribe(()=>e.updateValueAndValidity())),e.root.get("password").value!==e.value?{confirm:!0}:null):(this.listener&&(this.listener.unsubscribe(),this.listener=null),null)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Cb({type:e,selectors:[["","appRepeatedPassword",""]],features:[n.wb([{provide:c.e,useExisting:e,multi:!0}])]}),e.\u0275prov=n.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),k=(()=>{class e{constructor(e,t){this.formBuilder=e,this.repeatedPasswordDirective=t}create(){return this.registerForm=this.formBuilder.group({username:["",c.k.required],email:["",[c.k.required,c.k.email]],password:["",c.k.required],confirm:["",[this.repeatedPasswordDirective]]})}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(c.a),n.Qb(S))},e.\u0275prov=n.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Z(e,t){1&e&&(n.Mb(0,"span"),n.gc(1,"Please enter a valid username."),n.Lb())}function P(e,t){if(1&e&&(n.Mb(0,"ion-text",10),n.fc(1,Z,2,0,"span",11),n.Lb()),2&e){const e=n.Wb();n.xb(1),n.Zb("ngIf",e.registerForm.get("username").hasError("required"))}}function q(e,t){1&e&&(n.Mb(0,"span"),n.gc(1,"Please enter a valid email"),n.Lb())}function E(e,t){1&e&&(n.Mb(0,"span"),n.gc(1,"Email is required"),n.Lb())}function C(e,t){if(1&e&&(n.Mb(0,"ion-text",10),n.fc(1,q,2,0,"span",11),n.fc(2,E,2,0,"span",11),n.Lb()),2&e){const e=n.Wb();n.xb(1),n.Zb("ngIf",e.registerForm.get("email").hasError("email")),n.xb(1),n.Zb("ngIf",e.registerForm.get("email").hasError("required"))}}function H(e,t){1&e&&(n.Mb(0,"ion-text",10),n.gc(1," Password is required "),n.Lb())}function z(e,t){1&e&&(n.Mb(0,"ion-text",10),n.gc(1," Please confirm your password "),n.Lb())}const B=[{path:"",component:a,children:[{path:"entry",component:b},{path:"login",component:F},{path:"register",component:(()=>{class e{constructor(e,t,r){this.authorizationsHttpService=e,this.registerFormService=t,this.routerService=r}ngOnInit(){this.registerForm=this.registerFormService.create()}register(){this.authorizationsHttpService.register(this.registerForm).subscribe(()=>{this.routerService.navigate(["/auth","login"])},e=>{this.error=e})}}return e.\u0275fac=function(t){return new(t||e)(n.Hb(f),n.Hb(k),n.Hb(o.g))},e.\u0275cmp=n.Bb({type:e,selectors:[["app-register"]],decls:28,vars:7,consts:[[3,"title"],[1,"ion-padding"],[3,"formGroup","ngSubmit"],["position","floating"],["type","text","formControlName","username"],["color","danger",4,"ngIf"],["type","email","formControlName","email"],["type","password","formControlName","password"],["type","password","formControlName","confirm"],["type","submit",3,"disabled"],["color","danger"],[4,"ngIf"]],template:function(e,t){1&e&&(n.Ib(0,"app-toolbar",0),n.Mb(1,"ion-content",1),n.Mb(2,"h1"),n.gc(3,"Register"),n.Lb(),n.Mb(4,"form",2),n.Ub("ngSubmit",(function(){return t.register()})),n.Mb(5,"ion-item"),n.Mb(6,"ion-label",3),n.gc(7,"Username"),n.Lb(),n.Ib(8,"ion-input",4),n.fc(9,P,2,1,"ion-text",5),n.Lb(),n.Mb(10,"ion-item"),n.Mb(11,"ion-label",3),n.gc(12,"Email"),n.Lb(),n.Ib(13,"ion-input",6),n.fc(14,C,3,2,"ion-text",5),n.Lb(),n.Mb(15,"ion-item"),n.Mb(16,"ion-label",3),n.gc(17,"Password"),n.Lb(),n.Ib(18,"ion-input",7),n.fc(19,H,2,0,"ion-text",5),n.Lb(),n.Mb(20,"ion-item"),n.Mb(21,"ion-label",3),n.gc(22,"Confirm Password"),n.Lb(),n.Ib(23,"ion-input",8),n.fc(24,z,2,0,"ion-text",5),n.Lb(),n.Ib(25,"br"),n.Mb(26,"ion-button",9),n.gc(27,"Submit"),n.Lb(),n.Lb(),n.Lb()),2&e&&(n.Zb("title","Register"),n.xb(4),n.Zb("formGroup",t.registerForm),n.xb(5),n.Zb("ngIf",!t.registerForm.get("username").valid&&t.registerForm.get("username").dirty),n.xb(5),n.Zb("ngIf",!t.registerForm.get("email").valid&&t.registerForm.get("email").dirty),n.xb(5),n.Zb("ngIf",t.registerForm.get("password").dirty&&!t.registerForm.get("password").valid),n.xb(5),n.Zb("ngIf",t.registerForm.get("confirm").dirty&&!t.registerForm.get("confirm").valid),n.xb(2),n.Zb("disabled",!t.registerForm.valid))},directives:[h,s.g,c.l,c.i,c.c,s.k,s.l,s.j,s.z,c.h,c.b,i.i,s.b,s.r],styles:[""]}),e})()},{path:"**",redirectTo:"entry"}]}];let N=(()=>{class e{}return e.\u0275mod=n.Fb({type:e}),e.\u0275inj=n.Eb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(B)],o.i]}),e})();var j=r("PCNd"),D=r("JIr8"),O=r("nYR2");let Q=(()=>{class e{constructor(e){this.loadingService=e}intercept(e,t){let r=null;if(u.a.api.login===e.url)r="login";else{if(u.a.api.register!==e.url)return t.handle(e);r="register"}return this.loadingService[r]=!0,t.handle(e).pipe(Object(D.a)(e=>{let t="Network problem";throw 404===e.status?t="Incorrect email or password":400===e.status?t="An error has occurred, please try again":409===e.status?t=e.error.error:500===e.status&&(t="Unavailable Service"),t}),Object(O.a)(()=>{this.loadingService.login=!1}))}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(d))},e.\u0275prov=n.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),R=(()=>{class e{}return e.\u0275mod=n.Fb({type:e}),e.\u0275inj=n.Eb({factory:function(t){return new(t||e)},providers:[{provide:p.a,useClass:Q,multi:!0}],imports:[[i.b,j.a,N]]}),e})()}}]);